{% extends "base.html" %}
{% block title %}Yelp{% endblock %}
{% block main %}
{{ super() }}
<h2>Yelp category treemap</h2>
<div class="row">
  <div class="col-md-12">
    <div id="treemap-chart"></div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  var data;

  google.load("visualization", "1", {packages:["treemap"]});

  google.setOnLoadCallback(function() {
    // Create and populate the data table.
    data = google.visualization.arrayToDataTable({{ data | safe }});

    // Create and draw the visualization.
    var tree = new google.visualization.TreeMap(document.getElementById('treemap-chart'));
    tree.draw(data, {
      fontSize: 16,
      maxColor: '#00dd00',
      midColor: '#00bb00',
      minColor: '#009900'
    });

    google.visualization.events.addListener(tree, 'select', function() {
    });
  });
</script>
{% endblock %}
